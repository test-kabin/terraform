name: Deploy MVP Sample webapp
on: [ push, workflow_dispatch]

# ENVIRONMENT
env:
  OPENSHIFT_SERVER: api.xxoueqiy.eastus.aroapp.io

jobs:
  
  Deployment:
    runs-on: ubuntu-latest
    steps:

    
      - name: Retrieve Secrets From Vault
        id: secrets
        uses: hashicorp/vault-action@v2.4.0
        with:
          url: https://vault.kyndryl.net
          #token: ${{ secrets.VAULT_TOKEN }}
          token: s.6HLiI0ne9BqF5jAL9th2rNrr.cmH76
          tlsSkipVerify: true
          #caCertificate: ${{ secrets.VAULT_CA_CERT }}
          secrets: |
                kyndryl/sredemo/cubbyhole/github username  | USERNAME
                
                
      # - name: Import secrets
      #   id: secret1
      #   run: |
      #       security = ${{ steps.secrets.output.USERNAME }}
      #       echo "$security"
      #       echo "${{ steps.secrets.output.USERNAME }}"
      #       echo "$security" >> $GITHUB_ENV
           
      # - name: use the value 
      #   id:   step_t
      #   run:  |
      #      echo "${{ env.security }}" 


